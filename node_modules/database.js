require('dotenv').config();
const {MongoClient}=require('mongodb');

const url=process.env.MONGO_URI;
const client=new MongoClient(url);
const database='movies';
let collectionname='shivcollection';  
async function connectdb() {
await client.connect();
return client.db(database).collection(collectionname);
}
async function createdata() {
    let collection=await connectdb();
    const result=await collection.insertMany([
        {name:"prince of persia sand of time", year :"2008",rating:"8"},
        {name:"conjuring" ,year:"2013",rating:"8.4"},
        {name:"joker",year:"2020",rating:"9"}
    ]
    )
    console.log(`inserted ${result.insertedCount} documents`)
}
async function getdata() {
    let collection=await connectdb();
    let result= await collection.find({}).toArray();
    console.log(result);
    
}
async function updatedata() {
    let collection=await connectdb();
    let result=await collection.updateMany(
        {year:"2010"},
        {$set:{rating:"9.6"
        }}
    )
    console.log(`Updated ${result.modifiedCount} documents`);


    
}
async function deldata(req,res){
let collection=await connectdb();
let result=await collection.deleteOne(
    {name:"shutter_island"}
)
console.log(`deleted ${result.deletedCount} document`)

}

